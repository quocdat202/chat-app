{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React from 'react';\nimport { useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport login from \"../Images/login.png\";\nimport { collection, getDocs, query, where, addDoc, setDoc, doc } from \"firebase/firestore\";\nimport { db } from \"../Firebase\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Register(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState({\n    _id: '',\n    name: ''\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var usersRef = collection(db, \"users\");\n\n  var checkExistID = function checkExistID() {\n    var q, querySnapshot;\n    return _regeneratorRuntime.async(function checkExistID$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            q = query(usersRef, where('_id', '==', user._id));\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(getDocs(q));\n\n          case 3:\n            querySnapshot = _context.sent;\n\n            if (!(querySnapshot.docs.length > 0)) {\n              _context.next = 8;\n              break;\n            }\n\n            return _context.abrupt(\"return\", true);\n\n          case 8:\n            return _context.abrupt(\"return\", false);\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var register = function register() {\n    var result, newUser;\n    return _regeneratorRuntime.async(function register$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!(user._id && user.name)) {\n              _context2.next = 14;\n              break;\n            }\n\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(checkExistID());\n\n          case 3:\n            result = _context2.sent;\n\n            if (!result) {\n              _context2.next = 8;\n              break;\n            }\n\n            alert('Số điện thoại đã có người đăng ký');\n            _context2.next = 12;\n            break;\n\n          case 8:\n            newUser = doc(usersRef);\n            _context2.next = 11;\n            return _regeneratorRuntime.awrap(setDoc(newUser, user));\n\n          case 11:\n            navigation.navigate('Home', user);\n\n          case 12:\n            _context2.next = 15;\n            break;\n\n          case 14:\n            alert('Vui lòng nhập đầy đủ thông tin');\n\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return _jsxs(View, {\n    style: styles.login,\n    children: [_jsx(View, {\n      style: styles.header,\n      children: _jsx(Image, {\n        resizeMode: \"center\",\n        style: styles.image,\n        source: login\n      })\n    }), _jsxs(View, {\n      style: styles.form,\n      children: [_jsx(View, {\n        style: styles.inputEmail,\n        children: _jsx(TextInput, {\n          style: styles.input,\n          keyboardType: \"numeric\",\n          placeholder: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\",\n          onChangeText: function onChangeText(value) {\n            setUser(_objectSpread(_objectSpread({}, user), {}, {\n              _id: value\n            }));\n            /[^0-9]/.test(value) ? alert('Vui lòng chỉ nhập số!') : \" \";\n          }\n        })\n      }), _jsx(View, {\n        style: styles.inputEmail,\n        children: _jsx(TextInput, {\n          style: styles.input,\n          placeholder: \"T\\xEAn\",\n          onChangeText: function onChangeText(value) {\n            return setUser(_objectSpread(_objectSpread({}, user), {}, {\n              name: value\n            }));\n          }\n        })\n      })]\n    }), _jsx(View, {\n      style: styles.buttonGroup,\n      children: _jsx(View, {\n        style: styles.buttonAccess,\n        children: _jsx(Pressable, {\n          style: styles.register,\n          onPress: register,\n          children: _jsx(Text, {\n            style: {\n              color: 'blue'\n            },\n            children: \"\\u0110\\u0103ng k\\xFD\"\n          })\n        })\n      })\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  login: {\n    flex: 1,\n    alignItems: 'center',\n    backgroundColor: '#f1f1f1'\n  },\n  header: {\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingTop: 30\n  },\n  image: {\n    height: 300,\n    width: 300,\n    borderRadius: 300\n  },\n  form: {\n    width: '75%',\n    display: 'flex',\n    alignItems: 'center'\n  },\n  inputEmail: {\n    width: '100%'\n  },\n  inputPass: {\n    width: '100%',\n    marginTop: 15\n  },\n  input: {\n    width: '100%',\n    marginTop: 10,\n    borderWidth: 1,\n    padding: 10,\n    borderColor: 'white',\n    backgroundColor: 'white',\n    borderRadius: 5\n  },\n  buttonGroup: {\n    width: '75%',\n    display: 'flex',\n    paddingTop: 15,\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  buttonAccess: {\n    width: '100%',\n    marginTop: 30,\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'space-between'\n  },\n  register: {\n    width: '100%',\n    borderWidth: 1,\n    backgroundColor: 'white',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 15,\n    marginTop: 10,\n    borderRadius: 7,\n    borderColor: 'blue'\n  }\n});","map":{"version":3,"sources":["D:/Đồ án web/chat-app/Pages/Register.js"],"names":["React","useState","login","collection","getDocs","query","where","addDoc","setDoc","doc","db","Register","navigation","_id","name","user","setUser","usersRef","checkExistID","q","querySnapshot","docs","length","register","result","alert","newUser","navigate","styles","header","image","form","inputEmail","input","value","test","buttonGroup","buttonAccess","color","StyleSheet","create","flex","alignItems","backgroundColor","display","flexDirection","justifyContent","paddingTop","height","width","borderRadius","inputPass","marginTop","borderWidth","padding","borderColor"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport {useState} from 'react'\r\nimport {View , Text , Pressable , StyleSheet , Image ,TextInput } from 'react-native'\r\nimport login from '../Images/login.png'\r\nimport { collection, getDocs , query ,where ,addDoc, setDoc ,doc} from \"firebase/firestore\"\r\nimport { db } from '../Firebase'\r\n\r\n\r\nexport default function Register({navigation}) {\r\n    const [user, setUser] = useState({\r\n            _id : '',\r\n            name : ''\r\n    })\r\n    const usersRef = collection(db, \"users\");\r\n\r\n    const checkExistID = async () => {\r\n        const q = query(usersRef , where('_id','==',user._id));\r\n        const querySnapshot = await getDocs(q);\r\n        if(querySnapshot.docs.length > 0) return true;\r\n        else return false;\r\n    }\r\n    const register = async () => {\r\n        if(user._id && user.name){\r\n            const result = await checkExistID();\r\n            if(result) alert('Số điện thoại đã có người đăng ký');\r\n            else {\r\n                 const newUser = doc(usersRef);\r\n                 await setDoc(newUser , user);\r\n                 navigation.navigate('Home',user)\r\n            }\r\n        }else{\r\n            alert('Vui lòng nhập đầy đủ thông tin');\r\n        }\r\n    }\r\n  return (\r\n    <View style={styles.login} >\r\n        <View style={styles.header}>\r\n            <Image resizeMode='center' style={styles.image} source={login}  />\r\n        </View>\r\n        <View style={styles.form}>\r\n             <View style={styles.inputEmail}>\r\n                <TextInput style={styles.input} keyboardType='numeric' placeholder='Số điện thoại' onChangeText={(value) => {setUser({...user, _id : value});/[^0-9]/.test(value)?alert('Vui lòng chỉ nhập số!'):\" \"} }  />\r\n             </View>\r\n             <View style={styles.inputEmail}>\r\n                <TextInput style={styles.input} placeholder='Tên'  onChangeText={(value) => setUser({...user,name : value})}  />\r\n             </View>\r\n             \r\n        </View>\r\n        <View style={styles.buttonGroup}>\r\n             <View style={styles.buttonAccess}>\r\n                    <Pressable  style={styles.register} onPress={register} >\r\n                            <Text style={{color :'blue'}} >Đăng ký</Text>\r\n                    </Pressable>\r\n             </View>\r\n             {/* <Pressable style={styles.googleLogin} onPress={()=>handleLoginFacebook()}>\r\n                    <Text style={{color : 'white'}}>Đăng nhập với Google</Text>\r\n             </Pressable>\r\n             <Pressable style={styles.facebookLogin}>\r\n                    <Text style={{color : 'white'}}>Đăng nhập với facebook</Text>\r\n             </Pressable> */}\r\n        </View>\r\n    </View>\r\n  )\r\n}\r\nconst styles = StyleSheet.create({\r\n    login : {\r\n        flex : 1,\r\n        alignItems : 'center',\r\n        backgroundColor : '#f1f1f1'\r\n    },\r\n    header : {\r\n        display : 'flex',\r\n        flexDirection : 'row',\r\n        justifyContent : 'center',\r\n        alignItems : 'center',\r\n        paddingTop : 30\r\n    },\r\n    image : {\r\n        height : 300,\r\n        width : 300,\r\n        borderRadius : 300\r\n    },\r\n    form : {\r\n        width : '75%',\r\n        display : 'flex',\r\n        alignItems : 'center',\r\n    },\r\n    inputEmail : {\r\n        width : '100%',\r\n    },\r\n    inputPass : {\r\n        width : '100%',\r\n        marginTop : 15\r\n    },\r\n    input : {\r\n        width : '100%',\r\n        marginTop : 10,\r\n        borderWidth : 1,\r\n        padding : 10,\r\n        borderColor : 'white',\r\n        backgroundColor : 'white',\r\n        borderRadius : 5\r\n    },\r\n    buttonGroup : {\r\n        width : '75%',\r\n        display : 'flex',\r\n        paddingTop : 15,\r\n        flexDirection : 'column',\r\n        alignItems : 'center'\r\n    },\r\n    buttonAccess : {\r\n        width : '100%',\r\n        marginTop : 30,\r\n        display : 'flex',\r\n        flexDirection : 'column',\r\n        justifyContent : 'space-between'\r\n    },\r\n    register : {\r\n        width : '100%',\r\n        borderWidth : 1,\r\n        backgroundColor : 'white',\r\n        justifyContent : 'center',\r\n        alignItems : 'center',\r\n        padding : 15,\r\n        marginTop : 10,\r\n        borderRadius : 7,\r\n        borderColor : 'blue'\r\n    }, \r\n})\r\n"]},"metadata":{},"sourceType":"module"}